<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>C++的4种类型转换 - Sandy&#39;s Blog</title>


    <meta name="description" content="static_cast用隐式和用户定义转换的组合在类型间转换。 语法static_cast &lt;new_type&gt; (expression) 返回 new_type 类型的值。 解释唯有下列转换能用 static_cast 执行，但若转换会转型走常量性或易变性则亦不允许。  若存在从 expression 到 new_type 的隐式转换序列，或者若针对以 expression 到 ne">
<meta property="og:type" content="article">
<meta property="og:title" content="C++的4种类型转换">
<meta property="og:url" content="https://sandychn.github.io/2020/04/cpp-4-type-casts/index.html">
<meta property="og:site_name" content="Sandy&#39;s Blog">
<meta property="og:description" content="static_cast用隐式和用户定义转换的组合在类型间转换。 语法static_cast &lt;new_type&gt; (expression) 返回 new_type 类型的值。 解释唯有下列转换能用 static_cast 执行，但若转换会转型走常量性或易变性则亦不允许。  若存在从 expression 到 new_type 的隐式转换序列，或者若针对以 expression 到 ne">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sandychn.github.io/images/og_image.png">
<meta property="article:published_time" content="2020-04-21T16:43:00.000Z">
<meta property="article:modified_time" content="2020-10-03T03:38:40.652Z">
<meta property="article:author" content="SandyChen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sandychn.github.io/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/github.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/avatar.jpg" alt="C++的4种类型转换" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">主页</a>
                
                <a class="navbar-item"
                href="/archives">文章</a>
                
                <a class="navbar-item"
                href="/categories">分类</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="My GitHub" href="https://github.com/sandychn">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-8-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-21T16:43:00.000Z">2020-04-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/C/">C++</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    34 分钟 读完 (大约 5115 个字)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">...</span>次访问
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                C++的4种类型转换
            
        </h1>
        <div class="content">
            <h2 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a>static_cast</h2><p>用隐式和用户定义转换的组合在类型间转换。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p><code>static_cast &lt;new_type&gt; (expression)</code> 返回 <code>new_type</code> 类型的值。</p>
<h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><p>唯有下列转换能用 <code>static_cast</code> 执行，但<strong>若转换会转型走<em>常量性</em>或<em>易变性</em>则亦不允许</strong>。</p>
<ol>
<li><p>若存在从 <em>expression</em> 到 <em>new_type</em> 的<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion">隐式转换序列</a>，或者若针对以 <em>expression</em> 到 <em>new_type</em> 类型的对象或引用所进行的<a href="https://zh.cppreference.com/w/cpp/language/direct_initialization">直接初始化</a>的重载决议，找到至少一个可行函数，则 <code>static_cast &lt;new_type&gt; (expression)</code> 返回如同以 <code>new_type Temp(expression);</code> 所初始化的一个虚构变量 <code>Temp</code>，它可能涉及<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion">隐式转换</a>，对 <em>new_type</em> 的<a href="https://zh.cppreference.com/w/cpp/language/constructor">构造函数</a>的调用，或对<a href="https://zh.cppreference.com/w/cpp/language/cast_operator">用户定义转换运算符</a>的调用。<span style="color: gray">对于非引用的 <em>new_type</em>，static_cast 纯右值表达式的结果对象是其直接初始化的对象。 (C++17 起)</span></p>
</li>
<li><p>若 <em>new_type</em> 是某类类型 <code>D</code> 的左值或指向它的指针纯右值，而 <em>expression</em> 的类型是到其非虚基类 <code>B</code> 的指针或引用，则 <code>static_cast</code> 进行向下转型（downcast）。若 <code>B</code> 是 <code>D</code> 的有歧义、不可访问或虚的基类（或虚基类的基类），则此向下转型非良构。这种 <code>static_cast</code> 并不进行用以确保该对象的运行时类型确实是 <code>D</code> 的运行时检查，而且仅当这项前提条件由其他方法所保证时才能安全使用，例如在实现<a href="https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern#Static_polymorphism">静多态</a>时。可以用 <code>dynamic_cast</code> 执行安全的向下转型。</p>
 <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span> &#123;</span> &#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">D</span> :</span> B &#123; &#125;;</span><br><span class="line">D d;</span><br><span class="line">B&amp; br = d;</span><br><span class="line"><span class="keyword">static_cast</span>&lt;D&amp;&gt;(br); <span class="comment">// 左值指代原初的 d 对象</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><em>(本条自C++11起)</em> 若 <em>new_type</em> 是右值引用类型，则 <code>static_cast</code> 将泛左值、类纯右值或数组纯右值 (C++17 前) <span style="color: gray">任何左值 (C++17 起)</span> <em>expression</em> 的值转换为与该表达式指代相同对象，或指代其基类子对象（取决于 <em>new_type</em>）的<em>亡值</em>。若目标类型是表达式的不可访问或有歧义基类，则程序非良构。若表达式是<a href="https://zh.cppreference.com/w/cpp/language/bit_field">位域</a>左值，则它首先被转换成底层类型的纯右值。这种 <code>static_cast</code> 用于在 <code>std::move</code> 中实现移动语义。</p>
</li>
<li><p>若 <em>new_type</em> 是（可为 cv 限定的）void 类型，则 <code>static_cast</code> 在<strong>求值 <em>expression</em> 后</strong>舍弃其值。</p>
</li>
<li><p>若存在从 <em>new_type</em> 到 <em>expression</em> 类型的<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion">标准转换</a>序列，且它不包含左值到右值、数组到指针、函数到指针、空指针、空成员指针、<span style="color: gray">函数指针 (C++17 起)</span>或布尔转换，则 <code>static_cast</code> 能进行该隐式转换的逆转换。</p>
</li>
<li><p>若从 <em>expression</em> 到 <em>new_type</em> 涉及左值到右值、数组到指针或函数到指针转换，则能显式用 <code>static_cast</code> 进行。</p>
</li>
<li><p><a href="https://zh.cppreference.com/w/cpp/language/enum">有作用域枚举</a>类型(C++11)能转换成整数或浮点类型。</p>
<ol>
<li>当目标类型为 <em>cv</em> bool 时，若原值为零则结果为 false，而对所有其他值结果为 true。对于其余整型类型，若该枚举的值能以目标类型表示，则结果为其值，否则结果未指明。(C++20前)</li>
<li>其结果与从枚举的底层类型<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion">隐式转换</a>成目标类型的结果相同。  (C++20 起)</li>
</ol>
</li>
<li><p>整数或枚举类型值可转换为任何完整枚举类型。</p>
<ul>
<li><p>若底层类型不固定，则当 <em>expression</em> 的值落在范围（范围是大到足以保有目标枚举的所有枚举项的最小位域的所有可能值）外时，结果未指明 (C++17 前) 或 为未定义行为 (C++17 起)。</p>
</li>
<li><p>若底层类型固定，则其结果与<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion#.E6.95.B4.E6.95.B0.E7.B1.BB.E5.9E.8B.E8.BD.AC.E6.8D.A2">转换</a>原值到枚举的底层类型再到该枚举类型的结果相同。</p>
<p>浮点类型的值也可转换为任何完整枚举类型。</p>
</li>
<li><p>其结果与<a href="https://zh.cppreference.com/w/cpp/language/implicit_cast#Floating.E2.80.93integral_conversions">转换</a>原值到枚举的底层类型再到该枚举类型的结果相同。</p>
</li>
</ul>
</li>
<li><p>指向某类 <code>D</code> 的成员的指针可以向上转型（upcast）为指向其无歧义、可访问的基类 <code>B</code> 的成员。这种 <code>static_cast</code> 不进行用以确保成员实际存在于所指向对象的运行时类型的检查。</p>
</li>
<li><p>指向（可有 cv 限定）void 的指针类型的纯右值可转换到指向任何对象的指针类型。若原<a href="https://zh.cppreference.com/w/cpp/language/pointer#.E6.8C.87.E9.92.88">指针值</a>所表示的内存中字节地址不满足目标类型的对齐要求，则结果指针值未指明。否则，若原指针值指向对象 <em>a</em>，且存在与 <em>a</em> <em>指针可互转换<em>（定义于下文）的目标类型的（忽略 cv 限定）对象 *b</em>，则结果为指向 *b</em> 的指针。否则指针值不改变。任何指针转换到 void 指针，再转换回原（或更为 cv 限定的）类型的指针，都保持其原值。</p>
</li>
</ol>
<p>同所有转型表达式，结果是：</p>
<ul>
<li>左值，若 <em>new_type</em> 是左值引用或到函数类型的右值引用；</li>
<li>亡值，若 <em>new_type</em> 是到对象类型的右值引用；</li>
<li>否则为纯右值。</li>
</ul>
<p>满足以下条件时，两个对象 <em>a</em> 与 <em>b</em> <em>指针可互转换（pointer-interconvertible）</em>：</p>
<ul>
<li>它们为同一对象，或</li>
<li>一个是 union 对象而另一个是该对象的非静态数据成员，或</li>
<li>一个是<a href="https://zh.cppreference.com/w/cpp/language/data_members#.E6.A0.87.E5.87.86.E5.B8.83.E5.B1.80">标准布局</a>类对象，而另一个是该对象的首个非静态数据成员，或若该对象无非静态数据成员，则为该对象的任何基类子对象，或</li>
<li>存在对象 <em>c</em> 使得 <em>a</em> 与 <em>c</em> 指针可互转换，而 <em>c</em> 与 <em>b</em> 指针可互转换。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> U &#123; <span class="keyword">int</span> a; <span class="keyword">double</span> b; &#125; u;</span><br><span class="line"><span class="keyword">void</span>* x = &amp;u;                        <span class="comment">// x 的值为“指向 u 的指针”</span></span><br><span class="line"><span class="keyword">double</span>* y = <span class="keyword">static_cast</span>&lt;<span class="keyword">double</span>*&gt;(x); <span class="comment">// y 的值为“指向 u.b 的指针”</span></span><br><span class="line"><span class="keyword">char</span>* z = <span class="keyword">static_cast</span>&lt;<span class="keyword">char</span>*&gt;(x);     <span class="comment">// z 的值为“指向 u 的指针”</span></span><br></pre></td></tr></table></figure>

<h3 id="注"><a href="#注" class="headerlink" title="注"></a>注</h3><p><code>static_cast</code> 亦可用于通过进行到指定类型的函数到指针转换，来消解函数重载的歧义。如</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::for_each(files.begin(), files.end(),</span><br><span class="line">              <span class="keyword">static_cast</span>&lt;<span class="built_in">std</span>::ostream&amp;(*)(<span class="built_in">std</span>::ostream&amp;)&gt;(<span class="built_in">std</span>::flush));</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h2 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a>dynamic_cast</h2><p>沿继承层级向上、向下及侧向，安全地转换到其他类的指针和引用。</p>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p><code>dynamic_cast &lt;new_type&gt; (expression)</code> </p>
<p><em>new_type</em>：指向完整类类型的指针、到完整类类型的引用，或指向（可选的 cv 限定）void 的指针</p>
<p><em>expression*：若 *new_type</em> 为引用，则为完整类类型的 <span style="color:green">左值 (C++11 前)</span> / <span style="color:blue">泛左值 (C++11 起)</span> 表达式，若 <em>new_type</em> 为指针，则为指向完整类类型的指针纯右值。</p>
<p>若转型成功，则 <code>dynamic_cast</code> 返回 <em>new_type</em> 类型的值。若转型失败且 <em>new_type</em> 是指针类型，则它返回该类型的空指针。若转型失败且 <em>new_type</em> 是引用类型，则它抛出与类型 <a href="https://zh.cppreference.com/w/cpp/types/bad_cast">std::bad_cast</a> 的处理块匹配的异常。</p>
<h3 id="解释-1"><a href="#解释-1" class="headerlink" title="解释"></a>解释</h3><p>唯有下列转换能用 <code>dynamic_cast</code> 进行，但<strong>若这种转换会转换走<em>常量性</em>或<em>易变性</em>则亦不允许</strong>。</p>
<ol>
<li><p>若 <em>expression</em> 的类型恰是 <em>new_type</em> 或 <em>new_type</em> 的较少 cv 限定版本，则结果是 <em>expression</em> 具有 <em>new_type</em> 类型的值。（换言之，dynamic_cast 可用以添加常量性。隐式转换和 static_cast 亦能进行此转换。）</p>
</li>
<li><p>若 <em>expression</em> 的值是空指针值，则结果是 <em>new_type</em> 类型的空指针值。</p>
</li>
<li><p>若 <em>new_type</em> 是到 <code>Base</code> 的指针或引用，且 <em>expression</em> 的类型是到 <code>Derived</code> 的指针或引用，其中 <code>Base</code> 是 <code>Derived</code> 的唯一可访问基类，则结果是到 <em>expression</em> 所标识的对象中 <code>Base</code> 类子对象的指针或引用。（注意：隐式转换和 static_cast 亦能进行此转换。）</p>
</li>
<li><p>若 <em>expression</em> 是指向<a href="https://zh.cppreference.com/w/cpp/language/object#.E5.A4.9A.E6.80.81.E5.AF.B9.E8.B1.A1">多态类型</a>的指针，且 <em>new_type</em> 是到 void 的指针，则结果是指向 <em>expression</em> 所指向或引用的最终派生对象的指针。</p>
<blockquote>
<p>多态对象：声明或继承了至少一个虚函数的类类型的对象是多态对象</p>
</blockquote>
</li>
<li><p>若 <em>expression</em> 是到<a href="https://zh.cppreference.com/w/cpp/language/object#.E5.A4.9A.E6.80.81.E5.AF.B9.E8.B1.A1">多态类型</a> <code>Base</code> 的指针或引用，且 <em>new_type</em> 是到 <code>Derived</code> 类型的指针或引用，则进行运行时检查：</p>
<p>a) 检验 <em>expression</em> 所指向/标识的最终派生对象。若在该对象中 <em>expression</em> 指向/指代 <code>Derived</code> 的公开基类，且只有一个 <code>Derived</code>类型对象从 <em>expression</em> 所指向/标识的子对象派生，则转型结果指向/指代该 <code>Derived</code> 对象。（此之谓“向下转型（downcast）”。）</p>
<p>b) 否则，若 <em>expression</em> 指向/指代最终派生对象的公开基类，而同时最终派生对象拥有 <code>Derived</code> 类型的无歧义公开基类，则转型结果指向/指代该 <code>Derived</code>（此之谓“侧向转型（sidecast）”。）</p>
<p>c) 否则，运行时检查失败。若 dynamic_cast 用于指针，则返回 <em>new_type</em> 类型的空指针值。若它用于引用，则抛出 <a href="https://zh.cppreference.com/w/cpp/types/bad_cast">std::bad_cast</a> 异常。</p>
</li>
<li><p>当在构造函数或析构函数中（直接或间接）使用 dynamic_cast，且 <em>expression</em> 指代正在构造/销毁的对象时，该对象被认为是最终派生对象。若 <em>new_type</em> 不是到构造函数/析构函数自身的类或其基类之一的指针或引用，则行为未定义。</p>
</li>
</ol>
<p>与其他转型表达式相似：</p>
<ul>
<li>若 <em>new_type</em> 是左值引用类型（<em>expression</em> 必为左值），则其结果为左值</li>
<li>若 <em>new_type</em> 是右值引用类型（<em>expression</em> 为完整类类型，可以是<span style="color:green">左值或右值 (C++17 前)</span> / <span style="color:blue">必为泛左值（纯右值被<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion#.E4.B8.B4.E6.97.B6.E9.87.8F.E5.AE.9E.E8.B4.A8.E5.8C.96">实质化</a>） (C++17 起)</span>），则其结果为亡值</li>
<li>若 <em>new_type</em> 是指针类型，则其结果为纯右值</li>
</ul>
<h3 id="注-1"><a href="#注-1" class="headerlink" title="注"></a>注</h3><ul>
<li>亦可用 static_cast 进行向下转型，它避免运行时检查的开销，但只有在程序（通过某些其他逻辑）能够保证 <em>表达式</em> 所指向的对象肯定是 <code>Derived</code> 时才是安全的。</li>
<li>某些形式的 dynamic_cast 依赖于<a href="https://en.wikipedia.org/wiki/Run-time_type_information">运行时类型鉴别</a>（ RTTI ），即编译的程序中关于每个多态类的信息。编译器通常有选项禁用此信息。</li>
</ul>
<h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">V</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">()</span></span>&#123;&#125;;  <span class="comment">// 必须为多态以使用运行时检查的 dynamic_cast</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span> :</span> <span class="keyword">virtual</span> V &#123;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span> :</span> <span class="keyword">virtual</span> V &#123;</span><br><span class="line">    B(V* v, A* a) &#123;</span><br><span class="line">        <span class="comment">// 构造中转型（见后述 D 的构造函数中的调用）</span></span><br><span class="line">        <span class="keyword">dynamic_cast</span>&lt;B*&gt;(v);  <span class="comment">// 良好定义：v 有类型 V*，B 的 V 基类，产生 B*</span></span><br><span class="line">        <span class="keyword">dynamic_cast</span>&lt;B*&gt;(a);  <span class="comment">// 未定义行为：a 有类型 A*，A 非 B 的基类</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">D</span> :</span> A, B &#123;</span><br><span class="line">    D() : B((A*)<span class="keyword">this</span>, <span class="keyword">this</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">    <span class="keyword">virtual</span> ~Base() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Derived</span> :</span> Base &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">name</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    D d;       <span class="comment">// 最终派生对象</span></span><br><span class="line">    A&amp; a = d;  <span class="comment">// 向上转型，可以用 dynamic_cast，但不必须</span></span><br><span class="line">    D&amp; new_d = <span class="keyword">dynamic_cast</span>&lt;D&amp;&gt;(a);  <span class="comment">// 向下转型</span></span><br><span class="line">    B&amp; new_b = <span class="keyword">dynamic_cast</span>&lt;B&amp;&gt;(a);  <span class="comment">// 侧向转型</span></span><br><span class="line"></span><br><span class="line">    Base* b1 = <span class="keyword">new</span> Base;</span><br><span class="line">    <span class="keyword">if</span> (Derived* d = <span class="keyword">dynamic_cast</span>&lt;Derived*&gt;(b1)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"downcast from b1 to d successful\n"</span>;</span><br><span class="line">        d-&gt;name();  <span class="comment">// 可以安全调用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Base* b2 = <span class="keyword">new</span> Derived;</span><br><span class="line">    <span class="keyword">if</span> (Derived* d = <span class="keyword">dynamic_cast</span>&lt;Derived*&gt;(b2)) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"downcast from b2 to d successful\n"</span>;</span><br><span class="line">        d-&gt;name();  <span class="comment">// 可以安全调用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> b1;</span><br><span class="line">    <span class="keyword">delete</span> b2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="function"><span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;A&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> A)</span></span>;</span><br><span class="line">        D* test_d = <span class="keyword">static_cast</span>&lt;D*&gt;(ptr.get());</span><br><span class="line">        D&amp; test = <span class="keyword">dynamic_cast</span>&lt;D&amp;&gt;(*test_d);  <span class="comment">// 转型并不会出错 (见解释1)</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ptr.get() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; </span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; &amp;test &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::bad_cast&amp; e) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="function"><span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;A&gt; <span class="title">ptr</span><span class="params">(<span class="keyword">new</span> A)</span></span>;</span><br><span class="line">        D&amp; test = <span class="keyword">dynamic_cast</span>&lt;D&amp;&gt;(*ptr.get());  <span class="comment">// 向下转型失败, 会 throw</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ptr.get() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; </span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; &amp;test &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">const</span> <span class="built_in">std</span>::bad_cast&amp; e) &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Possible output:</span></span><br><span class="line"><span class="comment">// downcast from b2 to d successful</span></span><br><span class="line"><span class="comment">// 0xee1be0</span></span><br><span class="line"><span class="comment">// 0xee1be0</span></span><br><span class="line"><span class="comment">// std::bad_cast</span></span><br></pre></td></tr></table></figure>

<h2 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a>const_cast</h2><p>在有不同 cv 限定的类型间转换。</p>
<h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><p><code>const_cast &lt;new_type&gt; (expression)</code> 返回 <em>new_type</em> 类型的值。</p>
<h3 id="解释-2"><a href="#解释-2" class="headerlink" title="解释"></a>解释</h3><p>唯有下列转换能用 <code>const_cast</code> 进行。特别是，唯有 <code>const_cast</code> 可用于转型掉（移除）常量性或易变性。</p>
<ol>
<li><p>两个指向同一类型的可能多级的指针可以互相转换，无关乎每个层级的 cv 限定符。</p>
</li>
<li><p>任何 <code>T</code> 类型的左值可转换为到同一类型 <code>T</code> 的左值或右值引用，cv 限定可更多或更少。同样地，类类型纯右值或任何类型的亡值可转换成具有更多或更少 cv 限定的右值引用。引用 <code>const_cast</code> 的结果指代原对象，<span style="color: gray">若 <em>expression</em> 是泛左值，否则指代<a href="https://zh.cppreference.com/w/cpp/language/implicit_conversion#.E4.B8.B4.E6.97.B6.E9.87.8F.E5.AE.9E.E8.B4.A8.E5.8C.96">实质化的临时量</a> (C++17 起)</span>。</p>
</li>
<li><p>同样的规则适用于可能多层的到数据成员的指针<span style="color: gray">，及可能多层的到已知和未知边界数组（cv 限定元素的数组被认为是自身亦有 cv 限定） (C++17 起)</span></p>
</li>
<li><p>空指针值可转换成 <em>new_type</em> 的空指针值</p>
</li>
</ol>
<p>同所有转型表达式，结果是：</p>
<ul>
<li>左值，若 <em>new_type</em> 是左值引用或到函数类型的右值引用；</li>
<li>亡值，若 <em>new_type</em> 是到对象类型的右值引用；</li>
<li>否则为纯右值。</li>
</ul>
<h3 id="注-2"><a href="#注-2" class="headerlink" title="注"></a>注</h3><p>函数指针和成员函数指针不可用于 <code>const_cast</code>。</p>
<p><code>const_cast</code> 使得能够组成实际指代 <a href="https://zh.cppreference.com/w/cpp/language/cv">const 对象</a> 的到非 const 类型的引用或指针，或组成实际指代 <a href="https://zh.cppreference.com/w/cpp/language/cv">volatile 对象</a>的到非 volatile 类型的引用或指针。通过非 const 访问路径修改 const 对象和通过非 volatile <a href="https://zh.cppreference.com/w/cpp/language/value_category#.E6.B3.9B.E5.B7.A6.E5.80.BC">泛左值</a>涉指 volatile 对象是未定义行为。</p>
<h3 id="测试代码-1"><a href="#测试代码-1" class="headerlink" title="测试代码"></a>测试代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">type</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line"> </span><br><span class="line">    type(): i(<span class="number">3</span>) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> v)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="comment">// this-&gt;i = v;                 // 编译错误：this 是指向 const 的指针</span></span><br><span class="line">        <span class="keyword">const_cast</span>&lt;type*&gt;(<span class="keyword">this</span>)-&gt;i = v; <span class="comment">// 只要该对象不是 const 就 OK</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">3</span>;                 <span class="comment">// 不声明 i 为 const</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span>&amp; rci = i; </span><br><span class="line">    <span class="keyword">const_cast</span>&lt;<span class="keyword">int</span>&amp;&gt;(rci) = <span class="number">4</span>; <span class="comment">// OK：修改 i</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    type t; <span class="comment">// 假如这是 const type t，则 t.f(4) 会是未定义行为</span></span><br><span class="line">    t.f(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"type::i = "</span> &lt;&lt; t.i &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> j = <span class="number">3</span>; <span class="comment">// 声明 j 为 const</span></span><br><span class="line">    <span class="keyword">int</span>* pj = <span class="keyword">const_cast</span>&lt;<span class="keyword">int</span>*&gt;(&amp;j);</span><br><span class="line">    <span class="comment">// *pj = 4;      // 未定义行为</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">void</span> (type::* pmf)(<span class="keyword">int</span>) <span class="keyword">const</span> = &amp;type::f; <span class="comment">// 指向成员函数的指针</span></span><br><span class="line">    <span class="comment">// const_cast&lt;void(type::*)(int)&gt;(pmf);   // 编译错误：const_cast 不可用于成员函数指针</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="reinterpret-cast"><a href="#reinterpret-cast" class="headerlink" title="reinterpret_cast"></a>reinterpret_cast</h2><p>通过重新解释底层位模式在类型间转换。</p>
<h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><p><code>reinterpret_cast &lt;new_type&gt; (expression)</code> 返回 <code>new_type</code> 类型的值。</p>
<h3 id="解释-3"><a href="#解释-3" class="headerlink" title="解释"></a>解释</h3><p>与 <code>static_cast</code> 不同，但与 <code>const_cast</code> 类似，<code>reinterpret_cast</code> 表达式不会编译成任何 CPU 指令（除非在整数和指针间转换，或在指针表示依赖其类型的不明架构上）。<strong>它纯粹是一个编译时指令，指示编译器将 <em>expression</em> 视为如同具有 <em>new_type</em> 类型一样处理。</strong></p>
<p>唯有下列转换能用 <code>reinterpret_cast</code> 进行，但<strong>若转换会转型走<em>常量性</em>或<em>易变性</em>则亦不允许</strong>。</p>
<ol>
<li><p>整型、枚举、指针或成员指针类型的表达式可转换到其自身的类型。产生的值与 表达式 的相同。(C++11 起)</p>
</li>
<li><p>指针能转换成大小足以保有其类型所有值的任何整型类型（例如转换成 <code>std::uintptr_t</code>)</p>
</li>
<li><p>任何整型或枚举类型的值可转换到指针类型。指针转换到有足够大小的整数再转换回同一指针类型后，保证拥有其原值，否则结果指针无法安全地解引用（不保证相反方向的往返转换；相同指针可拥有多种整数表示）。不保证空指针常量 <code>NULL</code> 或整数零生成目标类型的空指针值；为此目的应该用 <code>static_cast</code> 或 隐式转换。</p>
</li>
<li><p>任何 <code>std::nullptr_t</code> 类型的值，包括 <code>nullptr</code>，可转换成任何整型类型，如同它是 <code>(void*)0</code> 一样，但没有值能转换成 <code>std::nullptr_t</code>，甚至 <code>nullptr</code> 也不行：为该目的应该用 <code>static_cast</code>。(C++11 起)</p>
</li>
<li><p>任何对象指针类型 <code>T1*</code> 可转换成指向对象指针类型 <code>cv T2</code> 。这严格等价于 <code>static_cast&lt;cv T2*&gt;(static_cast&lt;cv void*&gt;(表达式))</code>（这意味着，若 <code>T2</code> 的对齐要求不比 <code>T1</code> 的更严格，则指针值不改变，且将结果指针转换回原类型将生成其原值）。任何情况下，只有<em>类型别名化（type aliasing）</em>规则（<a href="https://zh.cppreference.com/w/cpp/language/reinterpret_cast">见此</a>）允许时，结果指针才可以安全地解引用。</p>
</li>
<li><p><code>T1</code> 类型的左值表达式可转换成到另一个类型 <code>T2</code> 的引用。结果是与原左值指代同一对象，但有不同类型的左值或亡值。不创建临时量，不进行复制，不调用构造函数或转换函数。只有<em>类型别名化（type aliasing）</em>规则（<a href="https://zh.cppreference.com/w/cpp/language/reinterpret_cast">见此</a>）允许时，结果指针才可以安全地解引用。</p>
</li>
<li><p>任何函数指针可转换成指向不同函数类型的指针。通过指向不同函数类型的指针调用函数是未定义的，但将这种指针转换回指向原函数类型的指针将生成指向原函数的指针值。</p>
</li>
<li><p>一些实现上（特别是在任何 POSIX 兼容的系统上，即基于 <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/dlsym.html">dlsym</a> 的要求），函数指针可以转换成 void* 或任何其他对象指针，反之亦然。若实现支持双向的转换，则转换回原类型将生成原值，否则结果指针不能安全地解引用或调用。</p>
</li>
<li><p>任何指针类型的空指针值可转换成任何其他指针类型，产生该类型的空指针值。注意不能用 <code>reinterpret_cast</code> 将空指针常量 <code>nullptr</code> 或任何其他 <code>std::nullptr_t</code> 类型的值转换为指针：为此目的应该使用隐式转换或 <code>static_cast</code>。</p>
</li>
<li><p>成员函数指针可转换成指向不同类型的不同成员函数的指针。转换回原类型将生成原值，否则结果指针不能安全使用。</p>
</li>
<li><p>指向某类 <code>T1</code> 的成员对象的指针可转换成指向另一个类 <code>T2</code> 的另一个成员对象的指针。若 <code>T2</code> 的对齐不比 <code>T1</code> 更严格，则转换回原类型 <code>T1</code> 将生成原值，否则不能安全地使用结果指针。</p>
</li>
</ol>
<p>同所有转型表达式，结果是：</p>
<ul>
<li>左值，若 <em>new_type</em> 是左值引用或到函数类型的右值引用；</li>
<li>亡值，若 <em>new_type</em> 是到对象类型的右值引用；</li>
<li>否则为纯右值。</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zh.cppreference.com/w/cpp/language/static_cast">static_cast</a></p>
<p><a href="https://zh.cppreference.com/w/cpp/language/dynamic_cast">dynamic_cast</a></p>
<p><a href="https://zh.cppreference.com/w/cpp/language/const_cast">const_cast</a></p>
<p><a href="https://zh.cppreference.com/w/cpp/language/reinterpret_cast">reinterpret_cast</a></p>

        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2020/04/cpp-rvalue-references/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">C++右值引用</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2020/04/cpp-optimizations-of-constructors/">
                <span class="level-item">C++构造函数的优化</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



</div>
                
                




<div class="column is-4-tablet is-4-desktop is-4-widescreen  has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="/avatar.jpg" alt="Sandy Chen">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Sandy Chen
                    </p>
                    
                    
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            29
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            9
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            10
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        
        
    </div>
</div>
    
        

    <div class="card widget" id="toc">
        <div class="card-content">
            <div class="menu">
                <h3 class="menu-label">
                    目录
                </h3>
                <ul class="menu-list"><li>
        <a class="is-flex" href="#static-cast">
        <span class="has-mr-6">1</span>
        <span>static_cast</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#语法">
        <span class="has-mr-6">1.1</span>
        <span>语法</span>
        </a></li><li>
        <a class="is-flex" href="#解释">
        <span class="has-mr-6">1.2</span>
        <span>解释</span>
        </a></li><li>
        <a class="is-flex" href="#注">
        <span class="has-mr-6">1.3</span>
        <span>注</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#dynamic-cast">
        <span class="has-mr-6">2</span>
        <span>dynamic_cast</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#语法-1">
        <span class="has-mr-6">2.1</span>
        <span>语法</span>
        </a></li><li>
        <a class="is-flex" href="#解释-1">
        <span class="has-mr-6">2.2</span>
        <span>解释</span>
        </a></li><li>
        <a class="is-flex" href="#注-1">
        <span class="has-mr-6">2.3</span>
        <span>注</span>
        </a></li><li>
        <a class="is-flex" href="#测试代码">
        <span class="has-mr-6">2.4</span>
        <span>测试代码</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#const-cast">
        <span class="has-mr-6">3</span>
        <span>const_cast</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#语法-2">
        <span class="has-mr-6">3.1</span>
        <span>语法</span>
        </a></li><li>
        <a class="is-flex" href="#解释-2">
        <span class="has-mr-6">3.2</span>
        <span>解释</span>
        </a></li><li>
        <a class="is-flex" href="#注-2">
        <span class="has-mr-6">3.3</span>
        <span>注</span>
        </a></li><li>
        <a class="is-flex" href="#测试代码-1">
        <span class="has-mr-6">3.4</span>
        <span>测试代码</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#reinterpret-cast">
        <span class="has-mr-6">4</span>
        <span>reinterpret_cast</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#语法-3">
        <span class="has-mr-6">4.1</span>
        <span>语法</span>
        </a></li><li>
        <a class="is-flex" href="#解释-3">
        <span class="has-mr-6">4.2</span>
        <span>解释</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#参考">
        <span class="has-mr-6">5</span>
        <span>参考</span>
        </a></li></ul>
            </div>
        </div>
    </div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/C/">
            <span class="level-start">
                <span class="level-item">C++</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Go/">
            <span class="level-start">
                <span class="level-item">Go</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Hexo/">
            <span class="level-start">
                <span class="level-item">Hexo</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/LeetCode/">
            <span class="level-start">
                <span class="level-item">LeetCode</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/MySQL/">
            <span class="level-start">
                <span class="level-item">MySQL</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python/">
            <span class="level-start">
                <span class="level-item">Python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/TCP-IP/">
            <span class="level-start">
                <span class="level-item">TCP/IP</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
            <span class="level-start">
                <span class="level-item">操作系统</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/ACM/" style="font-size: 13.33px;">ACM</a> <a href="/tags/C-11/" style="font-size: 16.67px;">C++11</a> <a href="/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Navicat/" style="font-size: 10px;">Navicat</a> <a href="/tags/STL/" style="font-size: 20px;">STL</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/Valgrind/" style="font-size: 10px;">Valgrind</a> <a href="/tags/memcheck/" style="font-size: 10px;">memcheck</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 20px;">数据结构</a>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-10-28T13:10:26.000Z">2020-10-28</time></div>
                    <a href="/2020/10/vmware-notes/" class="title has-link-black-ter is-size-6 has-text-weight-normal">VMware使用相关</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-10-04T15:39:14.000Z">2020-10-04</time></div>
                    <a href="/2020/10/tcp-ip-transport-layer/" class="title has-link-black-ter is-size-6 has-text-weight-normal">TCP/IP学习笔记：传输层</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/TCP-IP/">TCP/IP</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-10-03T03:10:31.000Z">2020-10-03</time></div>
                    <a href="/2020/10/hexo-icarus-blog-problems-solutions/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Hexo与Icarus博客搭建遇到问题与解决</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Hexo/">Hexo</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-06-17T11:59:20.000Z">2020-06-17</time></div>
                    <a href="/2020/06/python-topic3/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Python知识点3</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-06-17T11:57:20.000Z">2020-06-17</time></div>
                    <a href="/2020/06/python-topic2/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Python知识点2</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            文章
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/10/">
                <span class="level-start">
                    <span class="level-item">十月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/06/">
                <span class="level-start">
                    <span class="level-item">六月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/05/">
                <span class="level-start">
                    <span class="level-item">五月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">四月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">三月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">二月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ACM/">
                        <span class="tag">ACM</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/C-11/">
                        <span class="tag">C++11</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Linux/">
                        <span class="tag">Linux</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Navicat/">
                        <span class="tag">Navicat</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/STL/">
                        <span class="tag">STL</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/VMware/">
                        <span class="tag">VMware</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Valgrind/">
                        <span class="tag">Valgrind</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/memcheck/">
                        <span class="tag">memcheck</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/avatar.jpg" alt="C++的4种类型转换" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2021 SandyChen&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                共<span id="busuanzi_value_site_uv">0</span>个访客
                </span>
                
                <br>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="My GitHub" href="https://github.com/sandychn">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://sandychn.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>